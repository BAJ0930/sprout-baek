<?php
include_once $_SERVER['DOCUMENT_ROOT']."/_common.php";
include_once $_SERVER['DOCUMENT_ROOT']."/top.html";

if($_SESSION['USER_ID']) $dis = "none";
else $dis = "block";
?>


<style>
    /* 윙배너 */
    .banner_r {top: 496px; margin-left: 633px;}

    /* 툴팁 */
    .register_layer { display: none; position: absolute; top: 113px; left: 50%; margin-left: 81px; z-index: 9999; width: 269px; background: #fafafa; color: #102eff; padding: 10px; border: 1px solid #8998ff; border-radius: 8px; }
	.register_layer:after { content: ''; position: absolute; top: -10px; left: 20px; border-bottom: 10px solid #2843ff; border-right: 7px solid transparent; border-left: 7px solid transparent; }
	.register_layer i { color: red; position: absolute; top: 0; right: -20px; font-size: 20px; cursor: pointer; }

    /* 상품목록 */
	#new_arrival h2, 
    #best_arrival h2 { margin: 0 0 24px 0; position: relative; display: flex; align-items: center; justify-content: space-between; }
    .sum_box .box {margin:0;}
    .sum_box .box a {border: 0;}
    .sum_box .box .text {font-size: 16px; margin: 6px 0 0 0;}
    .sum_box .box .icon img {height: 12px;}
    .sum_box .box .percent {font-size: 13px;}
    .sum_box .box .percent strong {font-size: 15px;}
    .sum_box .box .percent span.max {font-size: 15px;}
    .sum_box .box .percent span.max strong {font-size: 17px;}
    .sum_box .box .point {font-size: 20px;}
    .sum_box .box span.icon.boxin {right: 14px; top: 206px;}

    /* 섹션 타이틀 */
    .main-tit {letter-spacing: 0; line-height: 1; margin: 0; justify-content: space-between; align-items: center;}
	.main-tit, .main-tit > a {color: #111111; font-size: 28px; font-family: "PLBold"; display: flex;}
    .main-tit span.btn-seeMore { 
        float: none !important; font-family: "PLRegular"; font-size: 16px; display: inline-block; color: #777777;
        line-height: 1; margin-left: 12px; font-weight: normal; background: #f4f4f4; padding: 6px 12px; border-radius: 8px;
    }
    .main-tit > a > span {font-size: 16px;}
    .main-tit > div > a {display: block; line-height: 46px; font-size: 16px; color: #555555; padding: 0 24px; border: 1px solid #dedede; border-radius: 24px;}
    .main-tit > div.btn-list {display: flex; gap: 8px;}
    .main-tit > div.btn-list img {vertical-align: middle;}

    /* 장바구니 담기 버튼 */
    .cart-in-btn { display: inline-block; box-sizing: border-box; font-family:"PLBold"; font-size: 16px; background: #E9F5FF; color: #005BF1 !important; line-height: 48px; padding: 0px 16px; border-radius: 24px; letter-spacing: -.01em; }
	.cart-in-btn.cart-in-btn02 { background: #ff4200; }
	
    /* 링크 배너 */
    .link-area-wrap {display: flex; gap: 48px;}
    .link-area {display: flex; gap: 20px; width: 100%;}
    .link-area li {text-align: center; background: #E9F5FF; border-radius: 20px; padding: 12px;}
    
    /* 중단 프로모션 배너 */
    .mid-bnr {border-radius: 20px; line-height: 1; margin-top: 64px; position: relative;}
    .mid-bnr a {display: block; line-height: 0;}
    .slider-container {width: 100%; overflow: hidden; position: relative;}
    .slider-list {display: flex; transition: transform 0.5s ease-in-out;}
    .slide {width: 100%; flex-shrink: 0;}
    .slider-dots {position: absolute; bottom: 12px; left: 50%; transform: translateX(-50%#ccc;); display: flex; z-index: 10;}
    .slider-dot {width: 10px; height: 10px; border-radius: 50%; background-color: rgba(204,204,204,0.75); margin: 0 5px; cursor: pointer;}
    .slider-dot.active {background-color: rgba(51,51,51,0.75);}
    .slider-prev, .slider-next {
        position: absolute; top: 50%; transform: translateY(-50%); 
        color: #fff; border: none; padding: 10px 20px; cursor: pointer; text-indent: -99px; overflow: hidden; border-radius: 50px; 
        height: 40px; width: 40px; box-sizing: border-box; z-index: 10;
    }
    .slider-prev {left: -58px; background: rgba(0, 0, 0, .1) url('/image/icon/dar_tab_prev.png') no-repeat center/36px auto; }
    .slider-next {right: -58px; background: rgba(0, 0, 0, .1) url('/image/icon/dar_tab_next.png') no-repeat 4px center/36px auto;}


    /* 팝업 */
    #main-popup { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 779px; background-color: #fff; display: none; z-index: 1000; }
	#main-popup-background { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); display: none; z-index: 999; }
	#main-close-btn { position: absolute; top: 16px; ;right: 16px; width: 40px; height: 40px; border: 0; background: rgb(0 0 0 / 30%); border-radius: 50%; font-size: 20px; color: #eeeeee; cursor: pointer; padding: 5px 0 12px 2px; text-align: center; }
	#main-close-today-btn { border: 0; font-size: 13px; position: absolute; bottom: -25px; background: 0; color: #ffffff; width: 150px; right: 0; cursor: pointer; }
</style>

<!-- 메인 슬라이드 배너 영역 -->
<iframe src="/main_slide_test.php" width="100%" height="1000" frameborder="0" allowfullscreen></iframe>

<div id="wrap">

    <!-- 신상품 -->
	<div id="new_arrival">
		<h2 class="main-tit"><a href="/product/news.html">New Arrivals<span class="btn-seeMore">See more</span></a><span><a href="javascript:fnCheckCartIn(1)" class="cart-in-btn">+ Check Item add to cart</a></span></h2>
		<div id="NewArrival" class="sum_box"><!-- @ loding --></div>
	</div>


    <div id="midPromotion" class="mid-bnr">
        <!--
            <a href="">
                <img src="/image/main/mid-bnr_sample.png" alt="Mid Banner Sample">
            </a>
        -->
        <button class="slider-prev">이전</button>
        <button class="slider-next">다음</button>
        <div class="slider-dots"></div>
        <div style="overflow: hidden; height: 120px; border-radius: 20px;">
            <ul class="slider-list">
                <li class="slide"><a href="/brand/brandView.html?s3=669"><img src="/image/main/mid-bnr_202501_chiikawa.png?0117" alt="Chiikawa Brand link"></a></li>
                <li class="slide"><a href="/brand/brandView.html?s3=330"><img src="/image/main/mid-bnr_202501_miffy.png?0117" alt="Miffy Brand link"></a></li>
                <li class="slide"><a href="/brand/brandView.html?s3=675"><img src="/image/main/mid-bnr_202501_sanrio.png?0117" alt="Sanrio Brand link"></a></li>
                <li class="slide"><a href="/brand/brandView.html?s3=498"><img src="/image/main/mid-bnr_202501_teeniping.png?0117" alt="Catch! Teeniping! Brand link"></a></li>
            </ul>
        </div>
    </div>

    <script>
        const sliderList = document.querySelector('.slider-list');
        const slides = document.querySelectorAll('.slide');
        const sliderDots = document.querySelector('.slider-dots');
        const sliderPrev = document.querySelector('.slider-prev');
        const sliderNext = document.querySelector('.slider-next');
        let currentSlide = 0;
        const slideCount = slides.length;
        let autoPlayInterval;

        // 슬라이드 이동
        function moveSlide(num) {
            sliderList.style.transform = `translateX(-${100 * num}%)`;
            sliderList.style.transition = 'transform 0.5s ease';
            currentSlide = num;
            updateDots();
        }

        // 점 내비게이션 생성
        function createDots() {
            sliderDots.innerHTML = ''; // 기존 점 제거
            for (let i = 0; i < slideCount; i++) {
                const dot = document.createElement('div');
                dot.classList.add('slider-dot');
                if (i === currentSlide) dot.classList.add('active');
                dot.addEventListener('click', () => {
                    stopAutoPlay();
                    moveSlide(i);
                    startAutoPlay();
                });
                sliderDots.appendChild(dot);
            }
        }

        // 점 내비게이션 업데이트
        function updateDots() {
            const dots = sliderDots.children;
            Array.from(dots).forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSlide);
            });
        }

        // 이전 슬라이드로 이동
        sliderPrev.addEventListener('click', () => {
            stopAutoPlay();
            currentSlide = (currentSlide - 1 + slideCount) % slideCount;
            moveSlide(currentSlide);
            startAutoPlay();
        });

        // 다음 슬라이드로 이동
        sliderNext.addEventListener('click', () => {
            stopAutoPlay();
            currentSlide = (currentSlide + 1) % slideCount;
            moveSlide(currentSlide);
            startAutoPlay();
        });

        // 자동 재생
        function startAutoPlay() {
            autoPlayInterval = setInterval(() => {
                currentSlide = (currentSlide + 1) % slideCount;
                moveSlide(currentSlide);
            }, 6500);
        }

        function stopAutoPlay() {
            clearInterval(autoPlayInterval);
        }

        // 초기 실행
        createDots();
        moveSlide(currentSlide);
        startAutoPlay();
    </script>


    <!-- 브랜드 루프 배너 -->
    <iframe src="/main_quk-brad.html" frameborder="0" allowfullscreen style="width: calc(100% + 112px); min-width: 1200px; height: 523px; transform: translateX(-50%); margin: 0 0 24px 50%;"></iframe>


    <!-- 베스트 상품 -->
	<div id="best_arrival">
        <h2 class="main-tit">
            <a href="/product/bests.html">
                Best Sellers<span class="btn-seeMore">See more</span>
            </a>
            <span><a href="javascript:fnCheckCartInBest(2)" class="cart-in-btn">+ Check Item add to cart</a></span>
        </h2>
		<div id="BestAward" class="sum_box"><!-- @ loding --></div>
	</div>
	
	<script type="text/javascript">
		function fnChangeProduct(t,no){
			var param = "callPos=main&s2=" + no + "&cateIDX=" + t;
			if(no == 1) var htmlPage = "NewArrival";
			else if(no == 2) var htmlPage = "BestAward";
			$.ajax({
				url:'/MainProductList.html',
				method : 'get',
				data : param,
				cache: false,
				error:fnErrorAjax,
				success:function(_response)
				{ $("#" + htmlPage).html(_response); }
			});
		}
		$(document).ready(function () {
			fnChangeProduct("",1);
			fnChangeProduct("",2);
			$("#NewArrivalTab li").each(function () {
				$(this).click(function () {
					$(this).addClass("select");
					$(this).siblings().removeClass("select");
				});
			});
			$("#BestAwardTab li").each(function () {
				$(this).click(function () {
					$(this).addClass("select");
					$(this).siblings().removeClass("select");
				});
			});

			jQuery(function($){
				var tabB = $('.tab_list');
				tabB.css('height', tabB.find('>ul>li>ul:visible').height()+40);
				function onSelectTabB(){
					var t = $(this);
					var myClass = t.parent('li').attr('class');
					t.parents('.tab_list:first').attr('class', 'tab_list '+myClass);
					tab.css('height', t.next('ul').height()+40);
				}
				tabB.find('>ul>li>a').click(onSelectTabB).focus(onSelectTabB);
			});
		});
	</script>

</div><!-- /#wrap -->


<!-- 하단 프로모션: 유튜브 및 이미지 링크 배너 -->
<div class="ad-banner-wrap">
    <div class="ad-banner">
        <iframe width="480" height="270" src="https://www.youtube.com/embed/rIwWAcFPrSg?si=OxX72_uh4yaYJGPV" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
    </div>
    <div class="image-link-banners">
        <div class="banner-row">
            <a href="javascript:alert('Being prepared for service');">
                <img src="/image/main/information_bnr01.png?241129" alt="Shopw Now">
            </a>
        </div>
        <div class="banner-row">
            <a href="/customer/help.html">
                <img src="/image/main/information_bnr02.png?241129" alt="Shipping">
            </a>
        </div>
        <div class="banner-row">
            <a href="/customer/dealer.html">
                <img src="/image/main/information_bnr03.png?241129" alt="Inquiry">
            </a>
        </div>
        <div class="banner-row">
            <a href="/customer/faq.html">
                <img src="/image/main/information_bnr04.png?241129" alt="FAQ">
            </a>
        </div>
    </div>
</div>


<!-- 공지사항 노출 롤링 -->
<div class="notice-container">
    <div class="notice-wrap">
		<div class="section-title" style="cursor:pointer;">Notice</div>
        <div class="notice">
            <ul class="notice-list" id="noticeList">
				<?php
				$sql = "Select IDX,Btitle,Bregdate from 2011_boardData where (BID='notice_eng') and Blevel=0 ORDER BY BregDate DESC limit 0,3";
				$nResult = sql_query($sql);
				while ($queryNoticeData = sql_fetch_array($nResult)){
				?>
				<li class="notice-list">
					<a href="/customer/mp_notice.html?pmode=view&IDX=<?=$queryNoticeData['IDX']?>"><?=$queryNoticeData['Btitle']?></a>
					<span class="date"><?=date("Y-m-d", $queryNoticeData['Bregdate'])?></span>
				</li>
				<? } ?>
            </ul>
        </div>
    </div>
	
	<script>
		document.addEventListener("DOMContentLoaded", function() {
			const noticeList = document.getElementById('noticeList');
			const notices = noticeList.children;
			const noticeHeight = notices[0].offsetHeight;
			let currentIndex = 0;

			function rollNotices() {
				currentIndex++;
				if (currentIndex >= notices.length) {
					currentIndex = 0;
				}
				noticeList.style.top = `-${currentIndex * noticeHeight}px`;
			}

			// 3초마다 공지사항 롤링
			setInterval(rollNotices, 3000);
		});
	</script>
</div>


<?php
include_once $_SERVER['DOCUMENT_ROOT']."/footer.html";
?>